{"version":3,"file":"vue.js","sources":["../../src/util.js","../../src/global-api/index.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/observer/dep.js","../../src/observer/watcher.js","../../src/lifecycle.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/vdom/index.js","../../src/index.js"],"sourcesContent":["export function proxy(vm, data, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      // vm.a\n      return vm[data][key] //vm._data.a\n    },\n    set(newVal) {\n      // vm.a=100\n      vm[data][key] = newVal // vm._data.a=100\n    },\n  })\n}\n\nexport function def(obj, key, val) {\n  Object.defineProperty(obj, key, {\n    enumerable: false, //不可枚举\n    configurable: false, //不可修改\n    value: val, //onserver实例\n  })\n}\n\nexport const LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n]\n\nconst strats = {}\n\nstrats.data = function (parentVal,childVal) {\n  return childVal\n\n}\nstrats.computed = function () {}\nstrats.watch = function () {}\nLIFECYCLE_HOOKS.forEach((hook) => {\n  strats[hook] = mergeHook\n})\nconsole.log(strats)\nfunction mergeHook(parentVal,childVal) { //生命周期合并\n  //最终合并的是一个数组\n   if(childVal){ //儿子有值 合并父亲的\n      if(parentVal){//儿子 、 父亲也有\n        return parentVal.concat(childVal)\n      }else{//只有儿子有\n          return [childVal] //父亲是options 儿子就是mixin  第一次父亲是空对象 {}  第二个是{create:function}\n      }\n   }else{ //父亲直接return 因为不需要考虑儿子了\n      return parentVal\n   }\n}\n\n\nexport function mergeOptions(parent, child) {\n  const options = {}\n  //遍历父亲，可能父亲有，儿子没有\n  for (const key in parent) {\n    mergeField(key)\n  }\n\n  //  儿子有，父亲没有\n  for (const key in child) {\n    if (!parent.hasOwnProperty(key)) {\n      mergeField(key)\n    }\n  }\n\n  function mergeField(key) {\n    //  根据key做不同的策略来进行合并\n    if( strats[key]){\n      options[key]=strats[key](parent[key],child[key])\n    }else{\n      options[key]=child[key]\n    }\n  }\n  return options\n} \n","import { mergeOptions } from \"../util\"\n\nexport function initGlobalApi(Vue){\n  Vue.options = {}\n  Vue.mixin=function (mixin){\n    this.options=mergeOptions(this.options,mixin) //选项合并：把用户传进来的选贤合并到当前的options上\n  }\n}\n","\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*` // 匹配标签名 <aa-aa>\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})` //\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) //标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`) //匹配标签结尾的 </div>\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/ //匹配属性的 a=\"a\" a='a' a=a\nconst startTagClose = /^\\s*(\\/?)>/ //匹配标签结束的 >\nexport const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // {{ xxx }}\n\nexport function parseHTML(html) {\n  let root\n  let currentParent\n  let stack=[]\n  function createASTElement(tagName, attrs) {\n    return {\n      tag: JSON.stringify(tagName),//标签名\n      type: 1,//元素类型\n      children: [],//子元素列表\n      attrs,//属性列表\n      parent: null,//父元素\n    }\n  }\n\n  function start(tagName, attrs) {\n    // console.log('start',typeof tagName,attrs)\n    const element = createASTElement(tagName, attrs)\n    if(!root){\n      root = element\n    }\n    currentParent=element;//保存当前解析的标签\n    stack.push(element)\n  }\n  function end(tagName) {\n    // console.log('end', tagName)\n  //   <div id=\"app\"><p></p> hello </div>\n  // console.log(stack)\n   const element= stack.pop();//\n    currentParent=stack[stack.length-1]//取出栈中的最后一个\n    if(currentParent){\n        element.parent=currentParent\n        currentParent.children.push(element)\n    }\n    // console.log(stack)\n  }\n  function chars(text) {\n    // console.log('text', text)\n    text=text.trim()\n    if(text){\n      // console.log(currentParent)\n      currentParent.children.push({\n        type:3,//文本类型\n        text\n      })\n    }\n  }\n  while (html) {\n    let textEnd = html.indexOf('<')\n    if (textEnd === 0) {\n      //是标签\n      const startTagMatch = parseStartTag() //处理开始\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n      const endTagMatch = html.match(endTag) //匹配到结束标签\n      // console.log('endTagMatch',endTagMatch)\n      // break\n      if (endTagMatch) {\n        //处理结束标签\n        advance(endTagMatch[0].length)\n        end(endTagMatch[1])\n        continue\n      }\n    }\n    let text\n    if (textEnd >= 0) {\n      //处理文本\n      text = html.substring(0, textEnd)\n    }\n    if (text) {\n      //有文本处理文本\n      // 删掉html中的文本\n      advance(text.length)\n      chars(text)\n    }\n  }\n  function advance(n) {\n    //  index+=n;\n    html = html.substring(n) //将字符串进行截取操作\n  }\n\n  function parseStartTag() {\n    let start = html.match(startTagOpen) //匹配标签开头\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n        // start:index\n      }\n      advance(start[0].length) //删除开始标签\n\n      // 如果是闭合标签 说明没有属性，所以每次循环都要判断一下\n      let end, attr\n\n      // 不是结尾标签 并且能拿到属性\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        // 假设 我们的 元素是这的 <div id=\"id\">hello vue2</div>\n        // attribute正则 逐步分析得到的数据\n        // s*([^\\s\"'<>\\/=]+)： s* 匹配连续的空格 ^\\s 不是空格 \"'<>不是双引或者单引 +前面的子表达式匹配多次 后面的正则基本就是匹配双引号、单引号、没有引号这三种分组情况，分别返回它们的所在分组匹配结果\n        // console.log(attr)\n        match.attrs.push({\n          name: attr[1], //attr是   {0:\" id=\"app \"\",1:\"id\",2:\"=\",3:\"app\",4:'app',5:app}这样的对象，它345只会出现一种情况，因为你不能是id=\"app'  这样的双｜单引号结尾\n          value: attr[3] || attr[4] || attr[5],\n        })\n        // 匹配完截取html\n        advance(attr[0].length)\n      }\n      if (end) {\n        //最后匹配到>号，把它删掉\n        advance(end[0].length)\n        return match\n      }\n    } else {\n    }\n  }\n  return root\n}\n","import { defaultTagRE } from './parse'\n\nexport function generate(ast) {\n  // console.log(ast)\n  let children = genChildren(ast)\n  let code = `_c(${ast.tag},${ast.attrs.length ? genProps(ast.attrs) : undefined}${\n    children ? `,${children}` : ''\n  })`\n  // console.log(code)\n  return code\n}\n\nfunction genProps(attrs) {\n  // console.log(attrs)\n  let str = ''\n  for (var i = 0; i < attrs.length; i++) {\n    let attr = attrs[i]\n    if (attr.name == 'style') {\n      let obj = {}\n      attr.value.split(';').forEach((item) => {\n        let [key, value] = item.split(':')\n        obj[key] = value\n        attr.value = obj\n      })\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\n  }\n  return `{${str.slice(0, -1)}}`\n}\n\nfunction genChildren(ast) {\n  const children = ast.children\n  if (children) {\n    return children.map((child) => gen(child)).join(',')\n  }\n}\n\n\nfunction gen(node) {\n  if (node.type === 1) {\n    return generate(node)\n  }\n  if (node.type === 3) {\n    let text = node.text\n    if (!defaultTagRE.test(text)) {\n      //  如果是普通文本： 不带{{}}\n      return `_v(${JSON.stringify(text)})`\n    }\n    let tokens = [] //存放每一段代码\n    let lastIndex = defaultTagRE.lastIndex = 0 //如果正则是全局模式 需要每次使用前置为零\n    let match, index //每次匹配到的结果和匹配到的索引\n    while ((match = defaultTagRE.exec(text))) {\n      index = match.index\n      // console.log(match)\n      // console.log(lastIndex)\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex,index)))\n      }\n      tokens.push(`_s(${match[1].trim()})`)\n      lastIndex = index + match[0].length\n     \n    }\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)))\n    }\n    return `_v(${tokens.join(\"+\")})`\n  }\n}\n","import { generate } from \"./generate\"\nimport { parseHTML } from \"./parse\"\n\nexport function compileToFunctions(template) {\n  // html模版 =》 render函数\n  //1.将html代码转化成ast语法树\n  //  <div id=\"app\"></div>\n  //  {\n  //    attrs:[{id:'app'}],\n  //    tag:'div',\n  //    children:[]\n  //  }\n  let ast = parseHTML(template)\n  // console.log(ast)\n\n  // 2.通过ast语法树重新生成代码\n   let code=generate(ast)\n  // 3.将字符串转换成函数\n  let render=new Function(`with(this){return ${code}}`)\n  // console.log(render);\n  return render\n}\n","export function patch(oldVnode, vnode) {\n  // 将虚拟节点转换成真实节点\n\n  const el = createElm(vnode) //产生真实的dom\n  let parentNode = oldVnode.parentNode //获取老的app的父元素 》 body\n\n  parentNode.insertBefore(el, oldVnode.nextSibling) //当前的真实元素插入到app的后面\n  parentNode.removeChild(oldVnode) //删除老的节点\n\n  return el\n}\n\nfunction createElm(vnode) {\n  const { tag, children, key, data, text } = vnode\n  // console.log(vnode)\n  if (typeof tag === 'string') {\n    vnode.el = document.createElement(tag)\n\n    updateProperties(vnode)\n    children.forEach((child) => {\n      vnode.el.appendChild(createElm(child))\n    })\n  } else {\n    vnode.el = document.createTextNode(text)\n  }\n  return vnode.el\n}\n\n\nfunction updateProperties(vnode){\n  let el=vnode.el\n  let newProps=vnode.data || {}\n  for (const key in newProps) {\n    if(key === 'style') {\n      for (const styleName in newProps[key]) {\n         el.style[styleName]=newProps.style[styleName]\n      }\n    }else if(key=== \"class\"){\n      el.className=newProps[key]\n    }else{\n      el.setAttribute(key,newProps[key])\n    }\n  \n  }\n}","\n//多对多的关系  一个属性有一个dep 用来收集watcher\n// dep 可以存多个watcher\n//一个watcher 可以对应多个dep\nclass Dep{\n  constructor(){\n    this.subs=[]\n  }\n\n  depend(){\n     this.subs.push(Dep.target)\n  }\n  notify(){\n    this.subs.forEach(watcher=>{watcher.update()})\n  }\n}\nDep.target=null\nexport function pushTarget(watcher){\n  Dep.target = watcher\n}\n\nexport function popTarget(watcher){\n  Dep.target = null\n}\n\nexport default Dep","import { popTarget, pushTarget } from \"./dep\";\n\nlet uid = 0;\nclass Watcher{\n  constructor(vm,expOrFn,cb,option){\n    this.vm=vm;\n    this.expOrFn=expOrFn;\n    this.cb=cb;\n    this.option=option;\n    this.id=++uid;//watcher唯一标识\n\n    if(typeof expOrFn === 'function'){\n      this.getter=expOrFn\n    }\n    this.get()\n  }\n  get(){\n     pushTarget(this)\n     this.getter()\n     popTarget() \n  }\n  updata(){\n    this.get()\n  }\n}\n\nexport default Watcher ","import { patch } from \"./vdom/patch\";\nimport Watcher from \"./observer/watcher\";\n\nexport function lifecycleMixin(Vue){\n  Vue.prototype._update = function (vnode){\n     console.log(vnode);\n     const vm= this\n     vm.$el= patch(vm.$el,vnode);//用新的元素替换老的vm.$el\n  } \n}\n\nexport function mountComponent(vm,el){\n  vm.$el=el\n  callHook(vm,'beforeMount')\n  // 调用render渲染el属性\n  //先调用render方法创建虚拟节点，再见虚拟节点渲染到页面\n  // vm._update(vm._render())\n\n  let updateComponent = ()=>{\n    vm._update(vm._render())\n  }\n  // 这个watcher用于渲染\n  new Watcher(vm,updateComponent,()=>{\n    callHook(vm,'beforeUpdate')\n  },true)\n  callHook(vm,'mounted')\n}\n\nexport function callHook(vm,hook){\n    const handlers=vm.$options[hook]\n    if(handlers){\n      for(let i=0;i<handlers.length;i++){\n        handlers[i].call(vm)\n      }\n    }\n}","const arrayProto = Array.prototype //拿到数组原型上的方法\n\n//继承  arrayMethods.proto = arrayProto\nexport const arrayMethods = Object.create(arrayProto)\n\n// 当我们在arrayMethods上添加要重写的方法，用户使用这些方法就会走进重写的方法，如果使用其他方法会在原型链上找到\n\n//要重写的方法\nconst methods = ['push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse']\n\nmethods.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    console.log(\"数组方法\"+method+\"被调用了\")\n    const result = arrayProto[method].apply(this, args)\n    const ob=this.__ob__\n    let inserted\n    switch (method) {\n      case 'push':\n      case 'unshift': //这两个方法都是追加，如果追加的内容是对象类型，再次做劫持\n        inserted = args\n        break;\n      case 'splice':\n        inserted = args.slice(2)\n        console.log(inserted)\n        break;\n    }\n    if (inserted) ob.observeArray(inserted)\n    return result\n  }\n})\n","import { def } from '../util'\nimport { arrayMethods } from './array'\nimport Dep from './dep'\n\nclass Observer {\n  constructor(value) {\n    // 判断一个对象是否被观测过,看有没有__ob__属性\n\n    def(value, '__ob__', this)\n    if (Array.isArray(value)) {\n      value.__proto__ = arrayMethods\n\n      this.observeArray(value)\n    } else {\n      this.walk(value)\n    }\n  }\n  walk(obj) {\n    let keys = Object.keys(obj) //获取对象的key\n\n    keys.forEach((key) => {\n      defineReactive(obj, key, obj[key])\n    })\n  }\n  observeArray(items) {\n    for (let i = 0; i < items.length; i++) {\n      observe(items[i])\n    }\n  }\n}\n\nfunction defineReactive(obj, key, value) {\n  observe(value)\n  let dep = new Dep() //每个属性产生一个Dep\n  //当页面取值时 说明这个值用来渲染了，将这个watcher和属性对应起来\n  Object.defineProperty(obj, key, {\n    get() {\n      console.log('get', value)\n      console.log('depTargin',Dep.target);\n      if(Dep.target){\n        dep.depend()\n      }\n      return value\n    },\n    set(newVal) {\n      if (newVal === value) return\n      observe(newVal) //如果用户将值改为对象继续拦截添加set和get\n      value = newVal\n      dep.notify()\n      console.log('set', value)\n    },\n  })\n}\n\nexport function observe(data) {\n  if (typeof data !== 'object' || typeof data === null) {\n    return data\n  }\n  if (data.__ob__) {\n    return data\n  }\n  return new Observer(data)\n}\n","import { observe } from './observer/index'\nimport { proxy } from './util'\n\nexport function initState(vm) {\n  //vm.$options\n  const opts = vm.$options\n  if (opts.props) {\n    initProps(vm, opts.props)\n  }\n  if (opts.methods) {\n    initMethods(vm, opts.methods)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) initComputed(vm, opts.computed)\n  if (opts.watch) {\n    initWatch(vm, opts.watch)\n  }\n}\n\n\n\nfunction initProps(vm) {}\nfunction initMethods(vm) {}\nfunction initData(vm) {\n  let data = vm.$options.data\n\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data\n\n  //数据的劫持方案 ：对象 Object.defineProperty\n  // 数组单独处理\n\n  // 当从vm上取属性时，将属性的取值代理到vm._data上\n   for (let key in data) {\n    proxy(vm,\"_data\",key)\n   }\n  observe(data)\n}\nfunction initComputed(vm) {\n  \n}\nfunction initWatch(vm) {}\n","import { compileToFunctions } from './compiler/index'\nimport { callHook, mountComponent } from './lifecycle'\nimport { initState } from './state'\nimport { mergeOptions } from './util'\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    // _init可能被子组件调用\n    //所以需要拿到当前实例的构造函数，如果是子类调用就是子类构造函数\n    vm.$options = mergeOptions(vm.constructor.options, options) //将用户自定义的options和全局的options进行合并\n    callHook(vm,'beforeCreate')\n    // 初始化状态,data、props、watch、computed\n    initState(vm)\n    callHook(vm,'created')\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n  Vue.prototype.$mount = function (el) {\n    //  挂载操作\n\n    const vm = this\n    el = document.querySelector(el)\n    const options = vm.$options\n    if (!options.render) {\n      //没有render\n      //  将template转换成render方法\n      let template = options.template\n      if (template) {\n      } else if (el) {\n        //有el\n        if (el.outerHTML) {\n          //考虑兼容性问题\n          template = el.outerHTML\n        } else {\n          const container = document.createElement('div')\n          container.appendChild(el.cloneNode(true)) //true为深克隆\n          template = container.innerHTML\n        }\n      }\n      //将模版编译成render函数\n      const render = compileToFunctions(template)\n      options.render = render\n    } else {\n      //  有render\n    }\n    // 需要挂在这个组件\n    mountComponent(vm, el)\n  }\n}\n","export function renderMixin(Vue){\n  Vue.prototype._c=function(){//创建元素\n    return createElement(...arguments)\n    \n  }\n  Vue.prototype._s=function(val){//stringify\n    return val == null ? '': (typeof val == 'object') ?JSON.stringify(val) : val\n  }\n  Vue.prototype._v=function(text){//创建虚拟文本元素\n    return createTextVnode(text)\n  }\n  Vue.prototype._render = function (){\n    const vm=this\n    const render=vm.$options.render\n    let vnode =render.call(this)\n    return vnode\n  }\n} \nfunction createElement(tag,data={},...children){\n// console.log(arguments);\n  return vnode(tag,data,data?.key,children)\n}\n\nfunction createTextVnode(text){\n// console.log(text);\nreturn vnode(undefined,undefined,undefined,undefined,text)\n}\n\nfunction vnode(tag,data,key,children,text){\n    return {\n      tag,\n      data,\n      key,\n      children,\n      text\n    }\n}","import { initGlobalApi } from './global-api/index'\nimport {initMixin} from './init'\nimport { lifecycleMixin } from './lifecycle'\nimport { renderMixin } from './vdom/index'\n\nfunction Vue(options){\n  \n  // console.log(options)\n  this._init(options)\n}\n\n//原型方法\ninitMixin(Vue)\nlifecycleMixin(Vue)\nrenderMixin(Vue)\n\n//静态方法\ninitGlobalApi(Vue)\nexport default Vue"],"names":["proxy","vm","data","key","Object","defineProperty","get","set","newVal","def","obj","val","enumerable","configurable","value","LIFECYCLE_HOOKS","strats","parentVal","childVal","computed","watch","forEach","hook","mergeHook","console","log","concat","mergeOptions","parent","child","options","mergeField","hasOwnProperty","initGlobalApi","Vue","mixin","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","defaultTagRE","parseHTML","html","root","currentParent","stack","createASTElement","tagName","attrs","tag","JSON","stringify","type","children","start","element","push","end","pop","length","chars","text","trim","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","generate","ast","genChildren","code","genProps","undefined","str","i","split","item","slice","map","gen","join","node","test","tokens","lastIndex","index","exec","compileToFunctions","template","render","Function","patch","oldVnode","vnode","el","createElm","parentNode","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","Dep","subs","target","watcher","update","pushTarget","popTarget","uid","Watcher","expOrFn","cb","option","id","getter","lifecycleMixin","prototype","_update","$el","mountComponent","callHook","updateComponent","_render","handlers","$options","call","arrayProto","Array","arrayMethods","create","methods","method","args","result","apply","ob","__ob__","inserted","observeArray","Observer","isArray","__proto__","walk","keys","defineReactive","items","observe","dep","depend","notify","initState","opts","props","initProps","initMethods","initData","initComputed","initWatch","_data","initMixin","_init","constructor","$mount","querySelector","outerHTML","container","cloneNode","innerHTML","renderMixin","_c","arguments","_s","_v","createTextVnode"],"mappings":"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"}